{% extends 'base.html.twig' %}

{% block title %}Charts index{% endblock %}

{% block body %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    
    <div>
        {% for chart in charts %}
        {% if chart.id < 3 %}

            <div>
            <h1>Graphe nÂ°{{ chart.id }}</h1>
            <p>[{{ chart.source_data | raw }}]</p>
            <canvas id="{{ chart.id }}" width="400" height="200"></canvas>
            <hr/>
            </div>
            <script>
                const ctx{{ chart.id }} = document.getElementById('{{ chart.id }}');
                new Chart(ctx{{ chart.id }}, {
                    type: '{{ chart.type }}',
                    data: {
                        labels: ['2024-01-11', '2024-09-11', '2025-10-11'],
                        datasets: [{
                            label: '{{ chart.id }}',
                            data: [{{ chart.source_data | raw }}],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            {% if chart.type == 'line' %}
                            y: {
                                beginAtZero: true
                            }
                            {% elseif chart.type == 'radar' %}
                            r: { 
                                min: 0, 
                                max: 10
                            }
                            {% endif %}   
                        }
                    }
                });
            </script>
        {% endif %}
        {% endfor %}

    </div>
    
    <a href="{{ path('app_charts_new') }}">Create new</a>
{% endblock %}
